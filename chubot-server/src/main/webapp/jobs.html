<!DOCTYPE html>
<html>
<head>
    <link href="/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/lib/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="/lib/bootstrap-toggle/bootstrap-toggle.min.css" rel="stylesheet">
    <link href="/css/base.css" rel="stylesheet">

    <meta charset="utf-8">
    <div id="header"></div>
    <title>Jobs of chubot</title>
</head>
<body>
<div class="container-fluid">
    <div id="nav"></div>
    <div ng-app="toogleApp" ng-controller="JobsController">
        <h1>提交新的爬虫任务</h1>
        <div class="row">
            <div class="col-lg-12">
                <input  toggle-checkbox ng-model="singleton" ng-change='chuToggle()' type="checkbox" data-width="200" data-on="只在一个Agent上执行" data-off="多Agent" data-onstyle="success" data-offstyle="info">
                <div class="input-group input-group-lg">
                    <input id="inputNewJob"  type="text" class="form-control"  ng-model="newJob" placeholder="Input a job...">
                    <span class="input-group-btn">
                        <button id="commitJob" class="btn btn-default" type="button" ng-click="commitJob($event, newJob, singleton)">Commit!</button>
                    </span>
                </div>
            </div>
        </div>
        <div class="alert {{status}}" role="alert" ng-show="isShowAlert">{{alertInfo}}</div>
    </div>
    <div id="pagingApp" ng-controller="JobsController">
        <h1>历史任务管理</h1>
        <div class="panel panel-primary table-responsive">
            <div class="panel-heading">
                <h3 class="panel-title">历史任务</h3>
            </div>
            <div class="panel-body col-lg-2">
                <button id="refreshHistory" type="button" ng-click="refreshHistory()">
                    <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> Refresh
                </button>
            </div>
            <table class="table table-striped table-hover table-condensed">
                <thead>
                <tr>
                    <th class="col-lg-1">SN</th>
                    <th class="col-lg-1">Id</th>
                    <th class="col-lg-8">job</th>
                    <th class="col-lg-2">time</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="item in items">
                    <td class="col-lg-1">{{$index + 1}}</td>
                    <td class="col-lg-1">
                        <a ng-href="/jobs/job?id={{item.id}}">{{item.id}}</a>
                    </td>
                    <td class="col-lg-8">{{item.job}}</td>
                    <td class="col-lg-2">{{item.time}}</td>
                </tr>
                </tbody>
            </table>
            <tm-pagination conf="paginationConf"></tm-pagination>
        </div>
    </div>
</div>
<script src="/lib/jquery/jquery-2.1.4.min.js" type="text/javascript" ></script>
<script src="/lib/angular/angular-1.4.4.min.js" type="text/javascript" ></script>
<script src="/lib/angular-paging/angular-paging.js" type="text/javascript"></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/lib/bootstrap-toggle/bootstrap-toggle.min.js" type="text/javascript"></script>
<script src="/lib/bootstrap-toggle/angular-toggle.js" type="text/javascript"></script>
<script src="/js/common.js" type="text/javascript" ></script>
<script src="/js/jobs-cntr.js" type="text/javascript" ></script>
<div id="footer"></div>
<script type="text/javascript">
    $(function(){
        $("#header").load('/template/header.html');
        $("#footer").load('/template/footer.html');
        $("#nav").load('/template/nav.html');
    });
    angular.bootstrap(angular.element("#pagingApp"),["pagingApp"]);
</script>
</body>
</html>
